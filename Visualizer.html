<!doctype html>
<html>
<head>
  <title>Web Audio API</title>
  <!--Load scripts-->
  <script src="glMatrix_util.js" type="text/javascript"></script>
  <script src="Visualizer.js" type="text/javascript"></script>

  <!--Fragment Shader-->
  <script id="shader-fs" type="x-shader/x-fragment">
    precision mediump float;

    uniform sampler2D uSampler;

    varying vec2 vTextureCoord;

    void main(void) {
        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        gl_FragColor = textureColor;
    }
  </script>

  <!--Vertex Shader-->
  <script id="shader-vs" type="x-shader/x-vertex">
    attribute vec3 aVertexPosition;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform sampler2D uSampler;

    varying vec2 vTextureCoord;
    varying vec3 vVertexPosition;

    void main(void) {
      vec4 textureColor = texture2D(uSampler, vec2(aTextureCoord.s, aTextureCoord.t));
      vVertexPosition = aVertexPosition;
      vVertexPosition.y = (textureColor.r + textureColor.g + textureColor.b)/3.0;
      gl_Position = uPMatrix * uMVMatrix * vec4(vVertexPosition, 1.0);
      vTextureCoord = aTextureCoord;
    }
  </script>
</head>
<body onload="main()">
  <h1>Music Visualizer</h1>
  <canvas id="glCanvas" width="512" height="512"> OOPS </canvas>
  <p></p>
	<td><b>Enter file name to open:</b>
	<td> <input type="text" id="fileName" value="BoxCat_Games_-_05_-_Battle_Boss.mp3" />
</body>
</html>
